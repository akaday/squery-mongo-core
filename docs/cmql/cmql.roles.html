<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>cmql.roles documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cmql</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cmql</span></div></div></li><li class="depth-2 branch"><a href="cmql.administration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>administration</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></div></li><li class="depth-3"><a href="cmql.common.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>convert</span></div></div></li><li class="depth-3 branch"><a href="cmql.convert.commands.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commands</span></div></a></li><li class="depth-3 branch"><a href="cmql.convert.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3 branch"><a href="cmql.convert.js-functions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>js-functions</span></div></a></li><li class="depth-3 branch"><a href="cmql.convert.operators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operators</span></div></a></li><li class="depth-3"><a href="cmql.convert.stages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stages</span></div></a></li><li class="depth-2 branch"><a href="cmql.diagnostic.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>diagnostic</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operators</span></div></div></li><li class="depth-3 branch"><a href="cmql.operators.operators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operators</span></div></a></li><li class="depth-3 branch"><a href="cmql.operators.options.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>options</span></div></a></li><li class="depth-3"><a href="cmql.operators.stages.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stages</span></div></a></li><li class="depth-2 branch"><a href="cmql.read-write.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>read-write</span></div></a></li><li class="depth-2 branch current"><a href="cmql.roles.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>roles</span></div></a></li><li class="depth-2"><a href="cmql.users.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>users</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cmql.roles.html#var-create-role"><div class="inner"><span>create-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-create-role-def"><div class="inner"><span>create-role-def</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-create-update-role"><div class="inner"><span>create-update-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-drop-all-roles-from-database"><div class="inner"><span>drop-all-roles-from-database</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-drop-role"><div class="inner"><span>drop-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-grant-privileges-to-role"><div class="inner"><span>grant-privileges-to-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-grant-roles-to-role"><div class="inner"><span>grant-roles-to-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-invalidate-user-cache"><div class="inner"><span>invalidate-user-cache</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-revoke-privileges-from-role"><div class="inner"><span>revoke-privileges-from-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-revoke-role-from-role"><div class="inner"><span>revoke-role-from-role</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-roles-info"><div class="inner"><span>roles-info</span></div></a></li><li class="depth-1"><a href="cmql.roles.html#var-update-role"><div class="inner"><span>update-role</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cmql.roles</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-create-role"><h3>create-role</h3><div class="usage"><code>(create-role db-name command-map &amp; args)</code></div><div class="doc"><pre class="plaintext">Roles like users belong to a database,admin database is better to be used to know where all info is
Requires = createRole/grantRole actions. Built in role 'userAdmin' can do those actions
           setAuthenticationRestriction action</pre></div></div><div class="public anchor" id="var-create-role-def"><h3>create-role-def</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-create-update-role"><h3>create-update-role</h3><div class="usage"><code>(create-update-role db-name command-map update? args)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-drop-all-roles-from-database"><h3>drop-all-roles-from-database</h3><div class="usage"><code>(drop-all-roles-from-database db-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Removes all roles from the argument db(users that belong to the database)
Requires = dropRole action</pre></div></div><div class="public anchor" id="var-drop-role"><h3>drop-role</h3><div class="usage"><code>(drop-role db-name rolename &amp; args)</code></div><div class="doc"><pre class="plaintext">Requires = dropRole action
</pre></div></div><div class="public anchor" id="var-grant-privileges-to-role"><h3>grant-privileges-to-role</h3><div class="usage"><code>(grant-privileges-to-role db-name rolename privileges &amp; args)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-grant-roles-to-role"><h3>grant-roles-to-role</h3><div class="usage"><code>(grant-roles-to-role db-name rolename roles &amp; args)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-invalidate-user-cache"><h3>invalidate-user-cache</h3><div class="usage"><code>(invalidate-user-cache db-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Flushes user information from in-memory cache, including removal of each userâ€™s credentials and roles.
This allows you to purge the cache at any given moment, regardless of the interval set in the
userCacheInvalidationIntervalSecs parameter
Requires = invalidateUserCache action on the cluster resource in order to use this command</pre></div></div><div class="public anchor" id="var-revoke-privileges-from-role"><h3>revoke-privileges-from-role</h3><div class="usage"><code>(revoke-privileges-from-role db-name rolename privileges &amp; args)</code></div><div class="doc"><pre class="plaintext">The resource must be an exact much.
Actions can be subsets</pre></div></div><div class="public anchor" id="var-revoke-role-from-role"><h3>revoke-role-from-role</h3><div class="usage"><code>(revoke-role-from-role db-name rolename privileges &amp; args)</code></div><div class="doc"><pre class="plaintext">Both built-in roles and user-defined roles
Requires = revokeRole action</pre></div></div><div class="public anchor" id="var-roles-info"><h3>roles-info</h3><div class="usage"><code>(roles-info db-name command-map &amp; args)</code></div><div class="doc"><pre class="plaintext">Command
 {
  rolesInfo: &lt;see below&gt;
  showPrivileges: &lt;Boolean&gt;
  showBuiltinRoles: &lt;Boolean&gt;
 }

rolesInfo
  { rolesInfo: 1, showBuiltinRoles: true }  all from the db run command
  { rolesInfo: { role: &lt;rolename&gt;, db: &lt;database&gt; } }
  { rolesInfo: [ 'roleName' { role : &lt;name&gt;, db: &lt;db&gt; } ...] }  many
Requires =  viewRole action to see a role you dont have
           (but each user is allowed to see their personal roles info)
</pre></div></div><div class="public anchor" id="var-update-role"><h3>update-role</h3><div class="usage"><code>(update-role db-name command-map &amp; args)</code></div><div class="doc"><pre class="plaintext">Requires =
revokeRole action on all databases in order to update a role
grantRole action on the database of each role in the roles array to update the array
grantRole action on the database of each privilege in the privileges array to update the array
If a privilegeâ€™s resource spans databases, you must have grantRole on the admin database.
A privilege spans databases if the privilege is any of the following
  a collection in all database
  all collections and all databas
  the cluster resource
setAuthenticationRestriction action on the database of the target role if change :authenticationRestrictions

A top level field that is present in the update command =&gt; completly replace the old one
its like invoke first and grant after
 For not fully replace use  grant/revoke commands</pre></div></div></div></body></html>